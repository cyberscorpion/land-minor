{% extends 'base.html' %}


   {% block content %}

    <div class="container">

        <h1>Script to load data</h1>

        <h3 id="number_of_registed_land"></h3>


        <button class="btn"  id="button">Register Land</button>

        <br>
        <br>
        <br>
        <form action="" method="post">
            {% csrf_token %}
            <input type="textarea" name="data" id="json_land_data">
            <input type="submit">
        </form>
    </div>


    <script>

        LandContract.getNumberOfLandRegistered(function(error, result){
            if(!error)
                {
                    $("#number_of_registed_land").html(result+' Land Registered');
                    console.log(result);
                }
            else
                console.error(error);
        });

        $("#button").click(function() {
            console.log( web3.eth.accounts[0]);
            console.log( web3.eth.accounts[1]);
            console.log( web3.eth.accounts[2]);
            console.log( web3.eth.accounts[3]);
            LandContract.registerLand(web3.eth.accounts[1], "Rajat Jain", "Noida","sector1", "41/56, Block-A, Near Nivas Bhavan", "1", "1",{from: web3.eth.accounts[0], gas:3000000});
            LandContract.registerLand(web3.eth.accounts[1], "Rajat Jain", "Noida","sector1", "42/56, Block-B, Near Pan Mandi", "2", "2",{from: web3.eth.accounts[0], gas:3000000});
            LandContract.registerLand(web3.eth.accounts[2], "Aman Singh", "Noida","sector1", "45/55, Block-B, Near Pan Mandi", "3", "3",{from: web3.eth.accounts[0], gas:3000000});

//            LandContract.add_land_available_to_sell(0, {from: web3.eth.accounts[0], gas:3000000});
//            LandContract.add_land_available_to_sell(2, {from: web3.eth.accounts[0], gas:3000000});

//            0,"0x985401a21ccad2ec0ec5b6f18a2b59be0566c541","0xc701AC8828E1E5DC0a55fdc6F62De50dD9F0ACeC", "Aman Singh"
//            "0x985401a21ccad2ec0ec5b6f18a2b59be0566c541","Rajat Jain", "Noida","sector1", "41/56, Block-A, Near Nivas Bhavan", "1", "1"



//"0xff14fd58b5f6e2101ed5f90b1035d8c185c0bafa", "Rajat Jain", "Noida","sector1", "41/56, Block-A, Near Nivas Bhavan", "256.245"
            console.log("Registering land");
                var x = LandContract.get_land_availabe_to_sell();
//        console.log(typeof x);
            var my_arr = []
            for(let i in x){
                var temp = LandContract.landList(x[i].c[0]);
                my_arr.push(temp);
            }
//                    console.log(x);
//            console.log(JSON.stringify(my_arr));
//                    console.log(JSON.parse(x))
                    $("#json_land_data").val(JSON.stringify(my_arr));

        });



//            $("#detail-table").html(
//                `<tr>
//                <th>Name</th>
//                <th>City</th>
//                <th>Address</th>
//                <th>Latitude</th>
//                <th>Longitude</th>
//            </tr>`);
//            console.log(x);
//            for(i in x){
//                var temp = LandContract.landList(x[i].c[0]);
//                console.log(temp);
//                var markup = `<tr>
//                    <td>${temp[2]}</td>
//                    <td>${temp[3]}</td>
//                    <td>${temp[4]}</td>
//                    <td>${temp[5]}</td>
//                    <td>${temp[6]}</td>
//                            </tr>`;
//                $("#detail-table").append(markup);

    </script>

{% endblock %}
